
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The jupyter_rfb guide &#8212; jupyter_rfb  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The jupyter_rfb reference" href="reference.html" />
    <link rel="prev" title="Welcome to the jupyter_rfb docs!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="the-jupyter-rfb-guide">
<h1>The jupyter_rfb guide<a class="headerlink" href="#the-jupyter-rfb-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install use pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">jupyter_rfb</span>
</pre></div>
</div>
<p>Developers, see the <a class="reference external" href="https://github.com/vispy/jupyter_rfb">readme</a> for a dev installation.</p>
</div>
<div class="section" id="subclassing-the-widget">
<h2>Subclassing the widget<a class="headerlink" href="#subclassing-the-widget" title="Permalink to this headline">¶</a></h2>
<p>The provided <a class="reference internal" href="reference.html#jupyter_rfb.RemoteFrameBuffer" title="jupyter_rfb.RemoteFrameBuffer"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoteFrameBuffer</span></code></a> class cannot do much by itself, but it serves as
a basis for widgets that want to generate images at the server, and be informed
of user events. The way to use <code class="docutils literal notranslate"><span class="pre">jupyter_rfb</span></code> is therefore to create a subclass
and implement two methods.</p>
<p>The first method to implement is <code class="docutils literal notranslate"><span class="pre">get_frame()</span></code>, which should return an (uint8) numpy array:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyRemoteFrameBuffer</span><span class="p">(</span><span class="n">jupyter_rfb</span><span class="o">.</span><span class="n">RemoteFrameBuffer</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</pre></div>
</div>
<p>The second method to implement is <code class="docutils literal notranslate"><span class="pre">handle_event()</span></code>:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyRemoteFrameBuffer</span><span class="p">(</span><span class="n">jupyter_rfb</span><span class="o">.</span><span class="n">RemoteFrameBuffer</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>  <span class="c1"># ...</span>

    <span class="k">def</span> <span class="nf">handle_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event_type</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;event_type&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="s2">&quot;resize&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logical_size</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pixel_ratio</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;pixel_ratio&quot;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">event_type</span> <span class="o">==</span> <span class="s2">&quot;pointer_down&quot;</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># ...</span>
</pre></div>
</div>
<p>This is where you can react to changes and user interactions. The most
important one may be the resize event, so that you can match the array
size to the occupied pixels on screen.</p>
</div>
<div class="section" id="scheduling-draws">
<h2>Scheduling draws<a class="headerlink" href="#scheduling-draws" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">get_frame()</span></code> method is called automatically when a new draw is
performed. There are cases when the widget knows that a redraw is
(probably) required, such as when the widget is resized.</p>
<p>If you want to trigger a redraw (e.g. because certain state has
changed in reaction to user interaction), you can call
<code class="docutils literal notranslate"><span class="pre">widget.request_draw()</span></code> to schedule a new draw.</p>
<p>The widget will only perform a new draw when it is ready to do so. To
be more precise, the client must have confirmed receiving the nth latest frame.
This mechanism makes that draws in Python match the speed by which
the frames can be communicated and displayed. This is also known as
throttling and helps realize minimal lag and high FPS.</p>
</div>
<div class="section" id="event-throttling">
<h2>Event throttling<a class="headerlink" href="#event-throttling" title="Permalink to this headline">¶</a></h2>
<p>Events go from the client (browser) to the server (Python). Some of
these are throttled so they are emitted a maximum number of times per
second. This is to avoid spamming the io and server process. The
throttling applies to the resize, scroll, and pointer_move events.</p>
</div>
<div class="section" id="measuring-statistics">
<h2>Measuring statistics<a class="headerlink" href="#measuring-statistics" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">RemoteFrameBuffer</span></code> class has a property <code class="docutils literal notranslate"><span class="pre">stats</span></code> that returns a dict
with performance metrics:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">reset_stats</span><span class="p">()</span>  <span class="c1"># start measuring</span>
<span class="go">    ... interact or run a test</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">stats</span>
<span class="go">{</span>
<span class="go">    ...</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="performance-tips">
<h2>Performance tips<a class="headerlink" href="#performance-tips" title="Permalink to this headline">¶</a></h2>
<p>The framerate that can be obtained depends on a number of factors:</p>
<ul class="simple">
<li><p>The size of a frame: larger frames generally take longer to encode.</p></li>
<li><p>The entropy (information density) of a frame: random data takes longer to compress.</p></li>
<li><p>How many widgets are drawing simultaneously (they use the same communication channel).</p></li>
<li><p>How much other work your CPU does (image compression is CPU-bound).</p></li>
</ul>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">jupyter_rfb</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#subclassing-the-widget">Subclassing the widget</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scheduling-draws">Scheduling draws</a></li>
<li class="toctree-l2"><a class="reference internal" href="#event-throttling">Event throttling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#measuring-statistics">Measuring statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#performance-tips">Performance tips</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to the jupyter_rfb docs!</a></li>
      <li>Next: <a href="reference.html" title="next chapter">The jupyter_rfb reference</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Almar Klein.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/guide.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>